(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     16773,        430]
NotebookOptionsPosition[     16319,        412]
NotebookOutlinePosition[     16655,        427]
CellTagsIndexPosition[     16612,        424]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "\"\<Global`*\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "SetDirectory", "[", 
   "\"\</home/sahand/Documents/EPFL/3\[EGrave]me Ann\[EAcute]e \
Bachelor/Semester Project/Pollard-Rho-CUDA/benchmarks\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"kepler", ",", "fermi"}], "}"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<kepler\>\"", ",", "\"\<fermi\>\""}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"register", ",", "duration"}], "}"}], "=", 
   RowBox[{"{", 
    RowBox[{"\"\<Regs*\>\"", ",", "\"\<Duration\>\""}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"f", "[", 
   RowBox[{
   "operation_String", ",", "architecture_String", ",", "precision_Integer", 
    ",", "field_String", ",", "gridSize_Integer", ",", "blockSize_Integer"}], 
   "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"path", ",", "data", ",", "index"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"path", "=", 
      RowBox[{"architecture", "<>", "\"\<_results/\>\"", "<>", 
       RowBox[{"ToString", "[", "precision", "]"}], "<>", "\"\<-bit/\>\"", "<>",
        "field", "<>", "\"\</\>\"", "<>", "operation"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"data", "=", 
      RowBox[{"Sort", "[", 
       RowBox[{"Partition", "[", 
        RowBox[{
         RowBox[{"ReadList", "[", 
          RowBox[{"path", ",", "Number"}], "]"}], ",", "3"}], "]"}], "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"index", "=", 
      RowBox[{
       RowBox[{"11", 
        RowBox[{"Log", "[", 
         RowBox[{"2", ",", "gridSize"}], "]"}]}], "+", 
       RowBox[{"Log", "[", 
        RowBox[{"2", ",", "blockSize"}], "]"}], "+", "1"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Part", "[", 
       RowBox[{"data", ",", "index"}], "]"}], "[", 
      RowBox[{"[", "3", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"multiPrecisionOperationGraph", "[", 
   RowBox[{
   "operation_List", ",", "architecture_List", ",", "precision_List", ",", 
    "field_String", ",", "isListPointPlot_Symbol"}], "]"}], ":=", 
  RowBox[{"Module", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"data", "=", 
       RowBox[{"{", "}"}]}], ",", "op", ",", "arch", ",", "pr"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"op", "=", "1"}], ",", 
       RowBox[{"op", "\[LessEqual]", 
        RowBox[{"Length", "[", "operation", "]"}]}], ",", 
       RowBox[{"op", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"arch", "=", "1"}], ",", 
         RowBox[{"arch", "\[LessEqual]", 
          RowBox[{"Length", "[", "architecture", "]"}]}], ",", 
         RowBox[{"arch", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"pr", "=", "1"}], ",", 
           RowBox[{"pr", "\[LessEqual]", 
            RowBox[{"Length", "[", "precision", "]"}]}], ",", 
           RowBox[{"pr", "++"}], ",", "\[IndentingNewLine]", 
           RowBox[{"AppendTo", "[", "\[IndentingNewLine]", 
            RowBox[{"data", ",", "\[IndentingNewLine]", 
             RowBox[{"Flatten", "[", 
              RowBox[{
               RowBox[{"Table", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Log", "[", 
                    RowBox[{"2", ",", "a"}], "]"}], ",", 
                   RowBox[{"Log", "[", 
                    RowBox[{"2", ",", "b"}], "]"}], ",", 
                   RowBox[{"f", "[", 
                    RowBox[{
                    RowBox[{"operation", "[", 
                    RowBox[{"[", "op", "]"}], "]"}], ",", 
                    RowBox[{"architecture", "[", 
                    RowBox[{"[", "arch", "]"}], "]"}], ",", 
                    RowBox[{"precision", "[", 
                    RowBox[{"[", "pr", "]"}], "]"}], ",", "field", ",", "a", 
                    ",", "b"}], "]"}]}], "}"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"a", ",", 
                   RowBox[{"Power", "[", 
                    RowBox[{"2", ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"0", ",", "10"}], "]"}]}], "]"}]}], "}"}], ",", 
                 RowBox[{"{", 
                  RowBox[{"b", ",", 
                   RowBox[{"Power", "[", 
                    RowBox[{"2", ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"0", ",", "10"}], "]"}]}], "]"}]}], "}"}]}], 
                "]"}], ",", "1"}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
          "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", "\[IndentingNewLine]", 
      RowBox[{"isListPointPlot", ",", "\[IndentingNewLine]", 
       RowBox[{"ListPointPlot3D", "[", "\[IndentingNewLine]", 
        RowBox[{"data", ",", "\[IndentingNewLine]", 
         RowBox[{"Filling", "\[Rule]", "Axis"}], ",", "\[IndentingNewLine]", 
         RowBox[{"PlotRange", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"Full", ",", "Full", ",", "Full"}], "}"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"PlotStyle", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"PointSize", "[", "0.01", "]"}], "}"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Ticks", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"i", ",", 
                RowBox[{"Power", "[", 
                 RowBox[{"2", ",", "i"}], "]"}]}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "0", ",", "10"}], "}"}]}], "]"}], ",", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"i", ",", 
                RowBox[{"Power", "[", 
                 RowBox[{"2", ",", "i"}], "]"}]}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "0", ",", "10"}], "}"}]}], "]"}]}], 
           "}"}]}]}], "\[IndentingNewLine]", "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"ListPlot3D", "[", "\[IndentingNewLine]", 
        RowBox[{"data", ",", "\[IndentingNewLine]", 
         RowBox[{"PlotRange", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"Full", ",", "Full", ",", "Full"}], "}"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"PlotStyle", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"PointSize", "[", "0.01", "]"}], "}"}]}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Ticks", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"i", ",", 
                RowBox[{"Power", "[", 
                 RowBox[{"2", ",", "i"}], "]"}]}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "0", ",", "10"}], "}"}]}], "]"}], ",", 
            RowBox[{"Table", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"i", ",", 
                RowBox[{"Power", "[", 
                 RowBox[{"2", ",", "i"}], "]"}]}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "0", ",", "10"}], "}"}]}], "]"}]}], 
           "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
      "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 CellChangeTimes->{{3.580293017590784*^9, 3.580293101871085*^9}, {
   3.580297155253359*^9, 3.580297284703466*^9}, {3.58029731788911*^9, 
   3.580297360988285*^9}, {3.5802974489700317`*^9, 3.580297468827539*^9}, {
   3.580297502258503*^9, 3.580297537076309*^9}, {3.5802976853276663`*^9, 
   3.580297688155201*^9}, {3.5802978558547783`*^9, 3.580297924549304*^9}, {
   3.580298685341797*^9, 3.580298713999737*^9}, {3.5802989969176493`*^9, 
   3.580299048756527*^9}, {3.580299080208988*^9, 3.580299080636922*^9}, {
   3.58029913035784*^9, 3.580299205693241*^9}, {3.580299651807004*^9, 
   3.5802997994301157`*^9}, {3.580300102788818*^9, 3.5803001049095592`*^9}, {
   3.5803003023232*^9, 3.5803003182081623`*^9}, {3.580301711149144*^9, 
   3.580301713704811*^9}, {3.5803028306275883`*^9, 3.58030283213542*^9}, {
   3.580303005158955*^9, 3.580303051242466*^9}, {3.580303087205144*^9, 
   3.580303091625825*^9}, {3.580303167961252*^9, 3.58030327732918*^9}, {
   3.58030333761797*^9, 3.58030337501228*^9}, {3.580303481049831*^9, 
   3.580303501776626*^9}, {3.580303564243081*^9, 3.580303631810824*^9}, {
   3.580303691579562*^9, 3.580303694666431*^9}, {3.5803037921456423`*^9, 
   3.580303795044372*^9}, {3.580304393693981*^9, 3.580304426340032*^9}, 
   3.58030529439371*^9, {3.5803055467390633`*^9, 3.580305554677671*^9}, {
   3.580305788385627*^9, 3.580305854263234*^9}, {3.580305887287156*^9, 
   3.580305924522498*^9}, {3.580305960870265*^9, 3.580305970045113*^9}, {
   3.580306002155819*^9, 3.5803060064227333`*^9}, {3.580306073538056*^9, 
   3.580306091530916*^9}, {3.58030736236769*^9, 3.580307363515411*^9}, {
   3.580308786170734*^9, 3.580308851924993*^9}, 3.580308936120985*^9, {
   3.5803359757757463`*^9, 3.58033600118222*^9}, 3.580337743541781*^9, {
   3.580347343081462*^9, 3.580347378244597*^9}, 3.580349230551889*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"multiPrecisionOperationGraph", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"\"\<add_loc_C\>\"", ",", "\"\<add_loc_assembly\>\""}], "}"}], 
     ",", 
     RowBox[{"{", "kepler", "}"}], ",", 
     RowBox[{"{", "131", "}"}], ",", "duration", ",", "True"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"a", ",", 
   RowBox[{"PlotLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<add_loc_C\>\"", ",", "\"\<add_loc_assembly\>\""}], "}"}]}], 
   ",", 
   RowBox[{"ViewPoint", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"2.3316825699216075", ",", 
      RowBox[{"-", "2.184876991754642"}], ",", "1.1133592969140536"}], 
     "}"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"816.", ",", "662."}], "}"}]}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<blocks per grid\>\"", ",", "\"\<threads per block\>\"", ",", 
      "\"\<us\>\""}], "}"}]}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"multiPrecisionOperationGraph", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"\"\<add_loc_C\>\"", ",", "\"\<add_loc_assembly\>\""}], "}"}], 
     ",", 
     RowBox[{"{", "kepler", "}"}], ",", 
     RowBox[{"{", "131", "}"}], ",", "register", ",", "True"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"a", ",", 
   RowBox[{"PlotLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<add_loc_C\>\"", ",", "\"\<add_loc_assembly\>\""}], "}"}]}], 
   ",", 
   RowBox[{"ViewPoint", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"2.3316825699216075", ",", 
      RowBox[{"-", "2.184876991754642"}], ",", "1.1133592969140536"}], 
     "}"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"816.", ",", "662."}], "}"}]}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<blocks per grid\>\"", ",", "\"\<threads per block\>\"", ",", 
      "\"\<registers\>\""}], "}"}]}], ",", " ", 
   RowBox[{"PlotRange", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"Automatic", ",", "Automatic", ",", 
      RowBox[{"{", 
       RowBox[{"16", ",", "19"}], "}"}]}], "}"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.58039965797082*^9, 3.5803996581196823`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"multiPrecisionOperationGraph", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"\"\<add_loc_kernel\>\"", ",", "\"\<add_glo_kernel\>\""}], 
      "}"}], ",", 
     RowBox[{"{", "kepler", "}"}], ",", 
     RowBox[{"{", "239", "}"}], ",", "duration", ",", "True"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"a", ",", 
   RowBox[{"PlotLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<add_loc_kernel\>\"", ",", "\"\<add_glo_kernel\>\""}], 
     "}"}]}], ",", 
   RowBox[{"ViewPoint", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"2.3316825699216075", ",", 
      RowBox[{"-", "2.184876991754642"}], ",", "1.1133592969140536"}], 
     "}"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"816.", ",", "662."}], "}"}]}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<blocks per grid\>\"", ",", "\"\<threads per block\>\"", ",", 
      "\"\<us\>\""}], "}"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.58039968338164*^9, 3.580399778417028*^9}, {
   3.580399841438274*^9, 3.580399847378846*^9}, {3.5803999596754427`*^9, 
   3.580399964592361*^9}, 3.580403623866996*^9, {3.5804036726386147`*^9, 
   3.580403673298085*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"multiPrecisionOperationGraph", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "\"\<mul_loc_kernel\>\"", ",", "\"\<mul_karatsuba_loc_kernel\>\""}], 
      "}"}], ",", 
     RowBox[{"{", "kepler", "}"}], ",", 
     RowBox[{"{", "191", "}"}], ",", "duration", ",", "True"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"a", ",", 
   RowBox[{"PlotLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<mul_loc_kernel\>\"", ",", "\"\<mul_karatsuba_loc_kernel\>\""}], 
     "}"}]}], ",", 
   RowBox[{"ViewPoint", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"2.3316825699216075", ",", 
      RowBox[{"-", "2.184876991754642"}], ",", "1.1133592969140536"}], 
     "}"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"816.", ",", "662."}], "}"}]}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<blocks per grid\>\"", ",", "\"\<threads per block\>\"", ",", 
      "\"\<us\>\""}], "}"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.58040410027391*^9, 3.580404114771571*^9}, {
  3.580404258963292*^9, 3.580404267430883*^9}, {3.5804044556181192`*^9, 
  3.580404455837171*^9}, {3.58040478329012*^9, 3.580404795100643*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"a", "=", 
   RowBox[{"multiPrecisionOperationGraph", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "\"\<mul_loc_kernel\>\"", ",", "\"\<mul_karatsuba_loc_kernel\>\""}], 
      "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"fermi", ",", " ", "kepler"}], "}"}], ",", 
     RowBox[{"{", "239", "}"}], ",", "duration", ",", "True"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"a", ",", 
   RowBox[{"PlotLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<mul_loc_kernel\>\"", ",", "\"\<mul_karatsuba_loc_kernel\>\""}], 
     "}"}]}], ",", 
   RowBox[{"ViewPoint", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"2.3316825699216075", ",", 
      RowBox[{"-", "2.184876991754642"}], ",", "1.1133592969140536"}], 
     "}"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"816.", ",", "662."}], "}"}]}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
     "\"\<blocks per grid\>\"", ",", "\"\<threads per block\>\"", ",", 
      "\"\<us\>\""}], "}"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.580404943415523*^9, 3.580404948307476*^9}}]
},
WindowSize->{1231, 776},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"9.0 for Linux x86 (64-bit) (November 20, 2012)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 9680, 218, 935, "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.}],
Cell[10240, 240, 2324, 64, 187, "Input"],
Cell[12567, 306, 1282, 33, 99, "Input"],
Cell[13852, 341, 1284, 34, 99, "Input"],
Cell[15139, 377, 1176, 33, 99, "Input"]
}
]
*)

(* End of internal cache information *)
